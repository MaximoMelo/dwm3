<script>

    function generateProductItem(name, isLast = false) {
        return `
            <div class="product-item">
                <div class="product-image-placeholder">
                    IMG
                </div>
                <span class="data-label text-light me-auto">${name}</span>
                <button type="button" class="btn btn-primary btn-sm" style="font-size: 0.8rem; width: 35px; flex-shrink: 0;">+</button>
            </div>
        `;
    }
    
    const listadoHTML = `
        <div class="filters-row">
            
            <div class="d-flex justify-content-between align-items-end mb-4">
                
                <div></div> 

                <div class="d-flex gap-2 align-items-end">
                    <div style="width: 180px;">
                            <select class="form-select btn btn-outline-light text-start shadow-none" id="categoria">
                                <option selected class="text-light">Categorías</option>
                                <option class="text-light">Ceviche</option>
                                <option class="text-light">Pescados al plato</option>
                                <option class="text-light">Acompañamientos</option>
                            </select>
                    </div>
                    <div style="width: 250px;">
                        <input type="text" class="form-control" id="search" placeholder="Buscar producto">
                    </div>
                    <div style="width: 100px;">
                        <button class="btn btn-primary w-100">Filtrar</button> 
                    </div>
                </div>
            </div>

            <div class="content-container">
                
                <div class="category-slider-wrapper">
                    <h5>Productos Destacados</h5>
                    <div class="image-slider-placeholder">
                        <span class="slider-arrow">◀</span>
                        <span class="text-light opacity-75">Slider de Imágenes</span>
                        <span class="slider-arrow">▶</span>
                    </div>
                </div>

                <div class="product-list-wrapper"> 
                    
                    ${generateProductItem('Producto 1')}
                    ${generateProductItem('Producto 2')}
                    ${generateProductItem('Producto 3')}
                    ${generateProductItem('Producto 4')}
                    ${generateProductItem('Producto 5')}
                    ${generateProductItem('Producto 6')}
                    ${generateProductItem('Producto 7')}
                    ${generateProductItem('Producto 8')}
                    ${generateProductItem('Producto 9')}
                    ${generateProductItem('Producto 10', true)}
                    
                </div>
            </div>
        </div>
    `;

    const appContent = document.getElementById('app-content');

    function loadView(viewName) {
        let content = '';
        
        switch (viewName) {
            case 'listado':
                content = listadoHTML;
                break;
            case 'admin':
                // Asumo que 'adminHTML' está definido en otro lugar o no lo usas aún
                content = adminHTML || `<h1 class="text-center mt-5 text-light">Vista de Administración.</h1>`;
                break;
            default:
                content = `<h1 class="text-center mt-5 text-light">Vista no encontrada.</h1>`;
        }
        
        appContent.innerHTML = content;
    }

    // NUEVA FUNCIÓN AÑADIDA
    function updateLoginButton() {
        const loginButton = document.getElementById('login-profile-btn');
        
        const isLoggedIn = localStorage.getItem('isLoggedIn');
        const userEmail = localStorage.getItem('userEmail'); 
        
        if (loginButton && isLoggedIn === 'true') {
            
            let profileText = 'Mi Perfil';
            if (userEmail) {
                let namePart = userEmail.substring(0, userEmail.indexOf('@'));
                profileText = namePart.charAt(0).toUpperCase() + namePart.slice(1);
            }

            loginButton.textContent = profileText;
            loginButton.href = 'MiPerfil.html';
            
            loginButton.classList.remove('btn-outline-info');
            loginButton.classList.add('btn-info');
        } 
    }

    // MODIFICACIÓN DE window.onload
    window.onload = function() {
        loadView('listado');
        updateLoginButton(); // Llama a la función para transformar el botón
    };
</script>